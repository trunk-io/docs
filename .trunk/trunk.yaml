version: 0.1
cli:
  version: 1.17.1

plugins:
  sources:
    - id: trunk
      ref: v1.2.6
      uri: https://github.com/trunk-io/plugins

    - id: configs
      uri: https://github.com/trunk-io/configs
      ref: v0.0.8

lint:
  definitions:
    - name: link-checker
      runtime: python
      extra_packages: [requests]
      commands:
        - name: lint
          files: [markdown]
          output: regex
          parse_regex: "(?P<path>.*?):(?P<line>\\d+): (?P<message>.*) \\((?P<code>\\w+)\\)"
          run: python3 ${workspace}/.trunk/link-checker/checker.py ${target}
          batch: false
          success_codes: [0, 2]
      suggest_if: never
    - name: markdown-link-check
      commands:
        - name: lint
          run: markdown-link-check -q "${target}" -c "${workspace}/.markdown-link-check.json"

  enabled:
    # More inherited enabled linters and other config here:
    #   https://github.com/trunk-io/configs/blob/main/plugin.yaml
    - markdown-link-check@3.11.2
    - link-checker

  disabled:
    - markdownlint
    - mypy

  ignore:
    - linters: [prettier]
      paths:
        - "**/*.md"

actions:
  enabled:
    # More inherited enabled actions and other config here:
    #   https://github.com/trunk-io/configs/blob/main/plugin.yaml
    - git-lfs
